<main class="main">
  <div class="content" style="flex-direction: column; align-items: center; max-width: 600px; margin: auto;">
    <h1 style="margin-bottom: 1rem; text-align: center;">{{ title }}</h1>
    <!-- <div style="margin-bottom: 1.5rem;">
      <button (click)="startListening()" [disabled]="listening" style="margin-right: 1rem;">Start Transcription</button>
      <button (click)="stopListening()" [disabled]="!listening">Stop</button>
      <span *ngIf="listening" style="color: green; margin-left: 1rem;">Listening...</span>
    </div> -->
      <div style="margin-bottom: 1.5rem; display: flex; align-items: center;">
        <button (click)="startListening()" [disabled]="listening" style="margin-right: 1rem;">Start Transcription</button>
        <button (click)="stopListening()" [disabled]="!listening">Stop</button>
        <span *ngIf="listening" style="color: green; margin-left: 1rem;">Listening...</span>
        <div style="margin-left: 2rem;">
          <label for="lang-select">Language:</label>
          <select id="lang-select" [(ngModel)]="language" (change)="switchLanguage(language)">
            <option value="en-IN">English (India)</option>
            <option value="hi-IN">Hindi (India)</option>
          </select>
        </div>
      </div>
    <div style="width: 100%; margin-bottom: 1.5rem;">
      <h3>Live Transcript:</h3>
      <div style="margin-bottom: 0.5rem; display: flex; gap: 1.5rem; align-items: center;">
        <mat-form-field appearance="fill" class="acko-mat-dark" style="width: 120px; margin-right: 1rem;">
          <mat-label>Doctor</mat-label>
          <input matInput [(ngModel)]="doctorName" />
        </mat-form-field>
        <mat-form-field appearance="fill" class="acko-mat-dark" style="width: 120px;">
          <mat-label>Patient/Family</mat-label>
          <input matInput [(ngModel)]="participantName" />
        </mat-form-field>
      </div>
      <div style="min-height: 60px; border: 1px solid #ccc; border-radius: 6px; padding: 0.75rem; background: #fafaff;">
        <span style="color:#1976d2; font-weight:bold;">{{ doctorName }}:</span>
        <span style="color: #444;">{{ transcript }}</span>
        <br />
        <span style="color:#388e3c; font-weight:bold;">{{ participantName }}</span>
      </div>
    </div>
    <div style="width: 100%;">
      <h3>Follow-up Questions:</h3>
      <app-followup-questions
        [questions]="questions"
        [editingIndex]="editingIndex"
        [editedQuestion]="editedQuestion"
        (accept)="acceptQuestion($event)"
        (edit)="startEdit($event)"
        (save)="saveEdit($event)"
        (cancel)="cancelEdit()"
        (swap)="swapQuestion($event)">
      </app-followup-questions>
    </div>
    <div *ngIf="sentiment === 'confused' || sentiment === 'distressed'" style="margin-top:1rem; padding:0.75rem; border:1px solid #e57373; background:#ffebee; color:#c62828; border-radius:6px;">
      <strong>Alert for Doctor:</strong>
      <span *ngIf="sentiment === 'confused'">The customer appears <b>confused</b> or is having trouble understanding.</span>
      <span *ngIf="sentiment === 'distressed'">The customer appears <b>distressed</b> or emotionally upset.</span>
    </div>
    <div *ngIf="sentiment !== 'confused' && sentiment !== 'distressed'" style="margin-top:1rem; color:#388e3c;">
      <span>Sentiment: {{ sentiment }}</span>
    </div>
  </div>
</main>
